# 介绍

docker部署前端项目

这里部署一个react18的项目试试看

## 创建  nginx.conf 配置文件

```nginx
upstream nest-server {
    server 192.168.31.56:3005;
}

server {
    listen       80;
    listen  [::]:80;
    server_name  localhost;

    location ^~ /api {
        rewrite ^/api/(.*)$ /$1 break;
        proxy_pass http://nest-server;
    }

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}

```

## 项目根目录下创建创建Dockerfile文件

```dockerfile
# build stage
FROM node:18 as build-stage

WORKDIR /app

COPY package.json ./

RUN npm config set registry https://registry.npmmirror.com/

RUN npm install

COPY . .

RUN npm run build

# production stage
FROM nginx:stable as production-stage

COPY --from=build-stage /app/build /usr/share/nginx/html

COPY --from=build-stage /app/nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]

```

##  .dockerignore文件

排除，打包速度会快一点

```js
node_modules/
.vscode/
.git/
build/
```

## 配置完毕开始构建

```dockerfile
docker build -t fe-container:first .
```

构建完毕，就可以在docker客户端看见镜像了



## 优化点

1.  .dockerignore文件  排除不需要的东西，打包速度块一点
2. FROM node:18 as build-stage  使用这种版本的时候使用小一点的  -alpine33.14